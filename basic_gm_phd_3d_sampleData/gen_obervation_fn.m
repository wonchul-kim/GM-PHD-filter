function Z = gen_observation_fn(model, X, W)

% linear observation equation (considers olny position)

if ~isnumeric(W)
    if strcmp(W,'noise')
        W= model.D*randn(size(model.D,2),size(X,2));
    elseif strcmp(W,'noiseless')
        W= zeros(size(model.D,1),size(X,2));
    end
end

if isempty(X)
    Z= [];
else
    Z= model.H*X+ W;
end